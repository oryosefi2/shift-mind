> תרחישי בדיקה ידניים (QA) ל‑ShiftMind. מסודרים לפי שלבים + סט בדיקות רגרסיה.

## לפני שמתחילים (Preflight)
- `docker compose up` — כל השירותים ירוקים.
- DB מאוכלס ב‑seed מינימלי: business דוגמה, שני עובדים, זמינות, תקציב.
- קובץ `.env.local` בפרונט מוגדר (API URL וכו’).

---
## Smoke Tests (כל ריצה)
1. **App loads**: עמוד הבית נטען ללא שגיאות קונסול.
2. **API health**: `GET /health` מחזיר `{status:"ok"}`.
3. **DB connectivity**: רשימת עסקים/עובדים נטענת.

---
## שלב 0–1: תשתית + סכמה
- יצירה/עדכון טבלאות עוברת ללא שגיאות.
- מדדים: אינדקסים קיימים, שאילתות בסיסיות רצות < 100ms בדאטה קטן.

---
## שלב 2: אימות וניווט
- משתמש לא מחובר → מנותב ל‑/login.
- התחברות (SimpleAuth או Supabase) → חזרה לדף הבית עם email ו‑business_id מוצג.
- Logout מפנה חזרה ל‑/login ומנקה מצב.

---
## שלב 3: CRUD
**Business Settings**
- שינוי timezone/week_start/open_hours נשמר ומיטען מחדש.

**Employees**
- יצירה עם שדות חובה, ולידציית אימייל, עריכה/מחיקה.
- חיפוש/מיון עובדים עובד (RTL).

**Availability**
- הוספת זמינות כולל overnight (22:00–06:00). טווחים לא חוקיים נדחים.

**Budgets**
- יצירה ל‑weekly/monthly עם תאריכים, עריכה/מחיקה, סינון לפי תקופה.

---
## שלב 4: שיבוץ Greedy
- הזן תקציב שבועי והמינימום עובדים לשעה.
- POST generate יוצר schedule + shifts בבסיס הנתונים.
- בדוק שמיזוג שעות רצופות בוצע, ושעות לילה מחושבות.
- חריגת תקציב עוצרת יצירה ומחזירה alert מתאים.

---
## שלב 5: עונתיות/חגים/אירועים
- הגדר HOLIDAY ביום מסוים עם multiplier 1.5.
- צור Event חופף עם priority גבוה יותר → המוכפל הנכון מיושם.
- בלוח שנה מוצגת אינדיקציה לימים משודרגים.

---
## שלב 6: חיזוי
- הפעל generate לשבוע עתידי.
- בדוק שנוצרו רשומות ב‑forecast_cache לכל שעה עם confidence_score.
- גרף חיזוי מציג בסיס + multipliers.

---
## שלב 7: Cron/Jobs
- Trigger ידני יוצר job_id ומצב מתעדכן עד “completed”.
- קרון לילה מייצר חיזוי לכל העסקים הפעילים (בדיקה ידנית/לוגים).

---
## שלב 8: שיפור שיבוץ
- הרצת local search משפרת עלות כוללת ≥ X% ומפחיתה הפרות.
- דוח before/after מציג דלתות (deltas) והסברים.

---
## שלב 9: לוח שבועי DnD
- גרירה משנה משמרת ושומרת.
- בר התקדמות תקציב מתעדכן בלייב, Alerts מופיעים.
- Undo/Redo מחזיר למצבים קודמים.

---
## שלב 10: ייצוא
- הורדת PDF RTL תקין עם טבלאות יומיות וסיכומים.
- הורדת XLSX עם לשוניות (Tabs) לכל יום.

---
## שלב 11: יבוא
- העלאת CSV בעייתי → מזהה תאריכים שגויים/כפילויות ומציע תיקונים.
- שמירת Template ושימוש חוזר בקובץ נוסף.

---
## שלב 12: Live Alerts + Audit
- פתיחת שני טאבים: שינוי בלוח יוצר alert חי בטאב השני.
- Audit Trail מציג מי/מה/מתי והבדלים (diff) ברור.

---
## שלב 13: הקשחה ו‑CI/CD
- GitHub Actions רץ ירוק על PR.
- Tag מחולל deploy ל‑staging, כולל migrations.
- Rollback אפשרי תוך דקות.

---
## רגרסיה מהירה (כל גרסה)
- CRUD מלא לכל היישויות → add/edit/delete → רענון דף והנתונים נשמרים.
- שיבוץ שבועי עם 2 עובדים ותקציב נמוך → מתקבל alert budget_risk.
- יבוא CSV קטן → 20 שורות מוצגות בתצוגה מקדימה ונשמרות ל‑demand_history.

---
## נתוני בדיקה מינימליים
- 1 עסק, 2 עובדים (מנהלת + עובד), זמינויות (בוקר/ערב), תקציב שבועי 5,000 ₪.
- demand_history ליומיים (שעות שיא 12:00–14:00, 18:00–21:00).

---
## טיפים
- בדיקות RTL: כיווניות, יישור טקסט, מספרים/מטבע.
- נגישות: פוקוס, Keyboard DnD, aria-labels בעברית.
- ביצועים: טבלאות וירטואליות מעל 1k שורות.
```

